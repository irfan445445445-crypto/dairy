<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Years</title>
<link rel="stylesheet" href="../style.css">
</head>
<body>
<div class="container">
  <h2>Select Year</h2>
  <div id="yearsList" class="grid"></div>

  <div class="bottom-row">
    <backBtn id="backBtn">Back</backBtn>
    <button id="muteBtn">Mute</button>
  </div>
</div>

<script>
let mode = "view";

// Request mode from parent
window.addEventListener("DOMContentLoaded", () => {
  parent.postMessage({ type: "requestMode" }, "*");
});

// Receive mode
window.addEventListener("message", e => {
  if(e.data?.type==="setMode") mode = e.data.mode;
});

const years = [2023,2024,2025,2026];
const yearsList = document.getElementById("yearsList");
years.forEach(y => {
  const b = document.createElement("button");
  b.textContent = y;
  b.addEventListener("click", () => {
    parent.postMessage({ type: "navigate", to:`Years/${y}/months.html`, mode }, "*");
  });
  yearsList.appendChild(b);
});

document.getElementById("backBtn").addEventListener("click", ()=> parent.postMessage({ type:'navigate', to:'index.html' }, '*'));
document.getElementById("muteBtn").addEventListener("click", ()=> parent.postMessage({ type:'toggleMute' }, '*'));

</script>
</body>
</html>
